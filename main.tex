\documentclass[hidelinks,11pt]{book}

\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage[charter]{mathdesign}
\usepackage[margin=1in]{geometry}
\setlength{\columnsep}{.5in}
\usepackage{fancyhdr}
\usepackage[compact]{titlesec}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage{setspace}
\usepackage{mfirstuc}
\usepackage{comment}
\usepackage{graphicx,changepage}
\usepackage{pgffor}

% Make hyperrefs work
\usepackage{hyperref}

% Set up bibliography
\usepackage[semicolon,round,sort&compress,sectionbib]{natbib}
\usepackage{chapterbib}   

% Set up glossaries
\usepackage{glossaries}
\input{glossary.tex}
\makeglossaries

% Set up source code highlighting
\usepackage{listings}
\usepackage[usenames,dvipsnames]{color}
\lstset{
basicstyle=\ttfamily,
columns=flexible,
breaklines=true
}

\usepackage{color}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\usepackage{xcolor}

\definecolor{foreground}{HTML}{4D4D4C}
\definecolor{background}{HTML}{FFFFFF}
\definecolor{selection}{HTML}{D6D6D6}
\definecolor{line}{HTML}{EFEFEF}
\definecolor{comment}{HTML}{8E908C}
\definecolor{red}{HTML}{C82829}
\definecolor{orange}{HTML}{F5871F}
\definecolor{yellow}{HTML}{EAB700}
\definecolor{green}{HTML}{718C00}
\definecolor{aqua}{HTML}{3E999F}
\definecolor{blue}{HTML}{4271AE}
\definecolor{purple}{HTML}{8959A8}
\definecolor{window}{HTML}{EFEFEF}
\definecolor{lightlisting}{HTML}{EEEEEE}
\newcommand{\CodeSymbol}[1]{\textcolor{red}{#1}\bfseries}

\lstset{aboveskip=20pt,
belowskip=20pt,
xleftmargin=2cm,
xrightmargin=2cm,
xtopmargin=1cm,
xbottommargin=1cm,
framexrightmargin=1em,
framexleftmargin=1em,
frame=bt,
framextopmargin=5pt,
framexbottommargin=5pt,
backgroundcolor=\color{lightlisting},
rulecolor=\color{lightlisting},}

% Define syntax highlighting style
\usepackage{listings}
\lstdefinestyle{cstyle}
{   
	language=C,
	showspaces=false,
	showtabs=false,
	breaklines=true,
	showstringspaces=false,
	breakatwhitespace=true,
	tabsize=4,
	commentstyle=\color{comment}\itshape,
	stringstyle=\color{red}\bfseries,
	basicstyle=\ttfamily,
	keywordstyle=\color{purple}\bfseries,
	otherkeywords = {;,<<,>>,++,<,>,\#include,\#define},
	morekeywords = [2]{;,\#include,\#define},
	keywordstyle = [2]{\color{blue}\bfseries},
	morekeywords = [3]{<<, >>},
	keywordstyle = [3]{\color{yellow}},
	morekeywords = [4]{++},
	keywordstyle = [4]{\color{teal}},
	morekeywords = [5]{<,>},
	keywordstyle = [5]{\color{yellow}},
	literate={\{}{{\CodeSymbol{ \{}}}1
	{\}}{{\CodeSymbol{\}}}}1
}
\lstset{language=C,style=cstyle}

% set up quotes
\usepackage{epigraph}


% Define titles
\singlespacing
\titleformat{\section}{\vspace{1em}\large\bfseries}{\thesection. }{0em}{}
\title{\vspace{-15mm}\fontsize{24pt}{10pt}\selectfont\textbf{CS241 System Programming Wikibook}}
\date{}

% define custom environments, so we can change global style at will
\newcommand{\inputchapter}[2]{\chapter{#2}\include{#1}}
\newcommand{\keyword}[1]{\texttt{#1}}
\newcommand{\todo}[0]{}
\lstnewenvironment{code}[1][]%
  {\noindent\minipage{\linewidth}\medskip 
   \lstset{basicstyle=\ttfamily\footnotesize,frame=single,#1}}
  {\endminipage}

\newenvironment{code}{\begin{lstlisting}}{\end{lstlisting}}

\newenvironment{proof}{\paragraph{Proof:}}{\hfill$\square$}
\usepackage{wrapfig}

\begin{document}

\raggedbottom

\pagestyle{fancy}
\fancyhf{}
\setcounter{secnumdepth}{1}
\setcounter{tocdepth}{1}

\maketitle

\tableofcontents

\inputchapter{introduction/introduction}{Introduction}
\inputchapter{introc/introc}{C Programming Language}
%\inputchapter{processes/processes.tex}{Processes}
%\inputchapter{malloc/malloc.tex}{Memory Allocators}
%\inputchapter{threads/threads.tex}{Threading}
%\inputchapter{synchronization/synchronization.tex}{Synchronization}
\inputchapter{deadlock/deadlock}{Deadlock}
%\inputchapter{scheduling/scheduling.tex}{Scheduling}
%\inputchapter{ipc/ipc.tex}{Interprocess Communication}
%\inputchapter{networking/networking.tex}{Networking}
%\inputchapter{filesystems/filesystems.tex}{Filesystems}
%\inputchapter{signals/signals.tex}{Signals}
%\inputchapter{review/review.tex}{Review}
\inputchapter{appendix/appendix}{Appendix}

\printglossaries

\end{document}